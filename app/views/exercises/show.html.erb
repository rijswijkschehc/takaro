<div class="row page-header">
  <div class="col-12 page-header-heading">
    <h1>
      <%= icon(id: 'dumbbell') %>
      <%= @exercise.title %>
      <% if policy(@exercise.model).edit? %>
        <%= link_to icon(id: 'edit'), edit_exercise_path(@exercise) %>
      <% end %>
    </h1>
  </div>
  <div class="col-12">
    <%= @exercise.step.badge %>
    <%= safe_join(@exercise.principles.map(&:badge)) %>
    <p class="lead"><%= @exercise.objective %></p>
  </div>
</div>

<div class="row mb-3">
  <div class="col-md-4"></div>
  <div class="col">
    <div class="card">
      <div class="card-body">
        <h6>
          <%= icon(id: 'info', fixed: true) %>
          <%= _('Description') %>
        </h6>
        <div class="ps-3 mb-3">
          <%= @exercise.description %>
        </div>
        <h6>
          <%= icon(id: 'tools', fixed: true) %>
          <%= _('Tips and techniques') %>
        </h6>
        <div class="ps-3 mb-3">
          <%= @exercise.tips %>
          <%= safe_join(@exercise.techniques.map(&:badge)) %>
        </div>
        <h6>
          <%= icon(id: 'tachometer-alt', fixed: true) %>
          <%= _('Variations') %>
        </h6>
        <div class="ps-3">
          <%= @exercise.variation %>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row mb-3">
  <div class="col">
    <div class="card">
      <h5 class="card-header"><%= _('Comments') %></h5>
      <div class="card-body">
        <%= render partial: 'comments/form', locals: { comment: Comment.new, commentable: @exercise } %>
        <hr>
        <%= turbo_stream_from @exercise, :comments %>
        <%= tag.div(id: "#{dom_id(@exercise)}_comments") do %>
          <%= render @exercise.comments %>
        <% end %>
      </div>
    </div>
  </div>
</div>
